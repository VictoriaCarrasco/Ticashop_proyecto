{% extends "base.html" %}
{% block title %}Usuarios{% endblock %}
{% block content %}
<div class="toolbar">
  <h1 class="page-title m0">Gesti√≥n de Usuarios</h1>
  <div class="spacer"></div>
  <a class="btn primary" href="{% url 'usuarios_new' %}">+ Nuevo Usuario</a>
  <a class="btn ghost" href="{% url 'usuarios_export' %}">Exportar</a>
</div>

<table class="table">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Email</th>
      <th>Rol</th>
      <th>Departamento</th>
      <th>Estado</th>
      <th class="right">Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for u in usuarios %}
    <tr>
      <td>{{ u.nombre  }}</td>
      <td>{{ u.email }}</td>
      <td>
        {% if u.rol == 'TECNICO' %}
          <span class="tag" style="background:#a984fd;color:#ffffff;">{{ u.get_rol_display }}</span>
        {% elif u.rol == 'GENERAL' %}
          <span class="tag" style="background:#4B5563;color:#fff;">{{ u.get_rol_display }}</span>
        {% elif u.rol == 'RRHH' %}
          <span class="tag" style="background:#6ea2f5;color:#fff;">{{ u.get_rol_display }}</span>
        {% elif u.rol == 'SUP_COM' %}
          <span class="tag" style="background:#0D9488;color:#fff;">{{ u.get_rol_display }}</span>
        {% elif u.rol == 'JEFATURA' %}
          <span class="tag" style="background:#f16d0e;color:#fff;">{{ u.get_rol_display }}</span>
        {% elif u.rol == 'NOMINA' %}
          <span class="tag" style="background:#c6a6cc;color:#fff;">{{ u.get_rol_display }}</span>
        {% else %}
          <span class="tag" style="background:#E5E7EB;color:#111827;">{{ u.get_rol_display }}</span>
        {% endif %}
      </td>

      <td>{{ u.departamento }}</td>
      <td>
        {% if u.activo %}
          <span class="badge ok">Activo</span>
        {% else %}
          <span class="badge danger">Inactivo</span>
        {% endif %}
      </td>
      <td class="right">
        <a class="btn ghost" href="{% url 'usuarios_view' u.id %}">Ver</a>
        <a class="btn" href="{% url 'usuarios_edit' u.id %}">Editar</a>
        <a class="btn danger" href="{% url 'usuarios_delete' u.id %}">Eliminar</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="empty">No hay usuarios.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
